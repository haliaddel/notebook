

#### mysql架构

![](C:\Users\武伟红\AppData\Roaming\marktext\images\2022-03-27-21-20-15-image.png)

1. 第一层：对客户端的连接处理、授权认证、安全等，每个客户端都会在服务端拥有一个线程，每个连接发起的查询都在对应的单独线程中执行。

2. 第二层：MYSQL核心服务层，包括查询解析、分析、查询缓存、内置函数、存储过程、触发器、视图等。

3. 第三层包含存储引擎：存储引擎负责mysql中数据的存储和提取。



#### 并发控制

1. 读写锁

  处理并发控制可以用两种类型的锁组成的锁系统解决问题。两种类型分别是共享锁和排他锁，也叫读写和写锁。读锁是共享的，多个客户在同一时刻允许读取同一资源，写锁是排他的，写锁会阻塞其他的读锁和写锁。

2. 锁粒度

   mysql每种存储引擎都可以 是心啊自己的锁策略和锁粒度。锁策略是指在锁的开销和数据的安全性之间寻求平衡。


